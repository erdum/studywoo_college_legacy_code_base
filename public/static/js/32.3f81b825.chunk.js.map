{"version":3,"sources":["utils/uploadFiles.js","views/settings/index.js"],"names":["uploadFiles","files","names","a","payload","FormData","i","length","extension","name","split","at","append","fetch","process","method","headers","getToken","body","status","SettingsPage","useState","images","setImages","lock","setLock","handleUpload","filesNames","Authorization","Accept","JSON","stringify","alert","container","direction","spacing","gridSpacing","item","justifyContent","xs","sx","color","marginLeft","variant","display","flexDirection","alignItems","p","mb","onChange","event","target","helperText","type","inputProps","accept","multiple","mt","position","disabled","onClick","size","top","left","marginTop"],"mappings":"sNAEe,SAAeA,EAA9B,oC,4CAAe,WAA2BC,EAAOC,GAAlC,mBAAAC,EAAA,sDAEd,IADMC,EAAU,IAAIC,SACXC,EAAI,EAAGA,EAAIL,EAAMM,OAAQD,GAAG,EAC9BE,EAAYP,EAAMK,GAAGG,KAAKC,MAAM,KAAKC,IAAI,GAC/CP,EAAQQ,OAAR,cAAsBN,GAAKL,EAAMK,GAAjC,UAAwCJ,EAAMI,GAA9C,YAAoDE,IAJvC,gBAMIK,MAAM,GAAD,OAAIC,mCAAJ,SAA2C,CACjEC,OAAQ,OACRC,QAAS,CACR,cAAgB,UAAhB,OAA2BC,gBAE5BC,KAAMd,IAXO,UAaK,MAbL,OAaNe,OAbM,0CAcN,GAdM,gCAgBP,MAhBO,4C,kPCKA,SAASC,IACvB,MAA4BC,mBAAS,IAArC,mBAAOC,EAAP,KAAeC,EAAf,KACA,EAAwBF,oBAAS,GAAjC,mBAAOG,EAAP,KAAaC,EAAb,KAEMC,EAAY,uCAAG,4BAAAvB,EAAA,0DAChBmB,EADgB,uBAEnBG,GAAQ,GAFW,SAGMzB,YAAYsB,GAHlB,cAGbK,EAHa,gBAIDd,MAAM,GAAD,OAAIC,mCAAJ,uBAAyD,CAC/EC,OAAQ,OACRC,QAAS,CACRY,cAAc,UAAD,OAAYX,eACzBY,OAAQ,mBACR,eAAgB,oBAEjBX,KAAMY,KAAKC,UAAU,CAAE7B,MAAOyB,MAXZ,OAcA,MAdA,OAcXR,QACPM,GAAQ,GACRO,MAAM,8BAENP,GAAQ,GACRO,MAAM,+BAnBY,2CAAH,qDAwBlB,OACC,eAAC,IAAD,CAAMC,WAAS,EAACC,UAAU,SAASC,QAASC,IAA5C,UACC,cAAC,IAAD,CAAMC,MAAI,EAACJ,WAAS,EAACK,eAAe,gBAAgBC,GAAI,GAAxD,SACC,cAAC,IAAD,CACCC,GAAI,CACHC,MAAO,iBACPC,WAAY,GAEbC,QAAQ,KALT,kCAUD,cAAC,IAAD,CAAMN,MAAI,EAAV,SACC,cAAC,IAAD,CAAMG,GAAI,CAAEI,QAAS,OAAQC,cAAe,SAAUC,WAAY,aAAcR,eAAgB,aAAcS,EAAG,GAAjH,SACC,gCACC,cAAC,IAAD,CACCP,GAAI,CACHC,MAAO,OACPO,GAAI,GAELL,QAAQ,KALT,8CASA,cAAC,IAAD,CACCM,SAAU,SAACC,GACV3B,EAAU2B,EAAMC,OAAOlD,QAExBmD,WAAW,gBACXT,QAAQ,WACRU,KAAK,OACLC,WAAY,CAAEC,OAAQ,UAAWC,UAAU,KAE5C,eAAC,IAAD,CAAKhB,GAAI,CAAEiB,GAAI,EAAGC,SAAU,YAA5B,UACC,cAAC,IAAD,CAAQC,SAAUnC,EAAMgB,GAAI,CAAEC,MAAO,SAAWmB,QAASlC,EAAciB,QAAQ,YAA/E,kBAGCnB,GACA,cAAC,IAAD,CACCqC,KAAM,GACNrB,GAAI,CACHkB,SAAU,WACVI,IAAK,MACLC,KAAM,OACNC,UAAW","file":"static/js/32.3f81b825.chunk.js","sourcesContent":["import getToken from './getToken';\n\nexport default async function uploadFiles(files, names) {\n\tconst payload = new FormData();\n\tfor (let i = 0; i < files.length; i+=1) {\n\t\tconst extension = files[i].name.split('.').at(-1);\n\t\tpayload.append(`file${i}`, files[i], `${names[i]}.${extension}`);\n\t}\n\tconst res = await fetch(`${process.env.REACT_APP_BASE_URL}/file`, {\n\t\tmethod: 'post',\n\t\theaders: {\n\t\t\t'Authorization': `Bearer ${getToken()}`\n\t\t},\n\t\tbody: payload\n\t});\n\tif (res.status === 200) {\n\t\treturn true;\n\t}\n\treturn null;\n}\n","import { useState } from 'react';\nimport { Grid, Typography, Card, TextField, Button, Box, CircularProgress } from '@mui/material';\nimport { gridSpacing } from 'store/constant';\n\nimport uploadFiles from 'utils/uploadFiles';\nimport getToken from 'utils/getToken';\n\nexport default function SettingsPage() {\n\tconst [images, setImages] = useState([]);\n\tconst [lock, setLock] = useState(false);\n\n\tconst handleUpload = async () => {\n\t\tif (images) {\n\t\t\tsetLock(true);\n\t\t\tconst filesNames = await uploadFiles(images);\n\t\t\tconst res = await fetch(`${process.env.REACT_APP_BASE_URL}/site/change-images`, {\n\t\t\t\tmethod: 'post',\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${getToken()}`,\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({ names: filesNames })\n\t\t\t});\n\n\t\t\tif (res.status !== 200) {\n\t\t\t\tsetLock(false);\n\t\t\t\talert('Unexpected error ocurred');\n\t\t\t} else {\n\t\t\t\tsetLock(false);\n\t\t\t\talert('Images successfuly changed');\n\t\t\t}\n\t\t}\n\t};\n\n\treturn (\n\t\t<Grid container direction=\"column\" spacing={gridSpacing}>\n\t\t\t<Grid item container justifyContent=\"space-between\" xs={12}>\n\t\t\t\t<Typography\n\t\t\t\t\tsx={{\n\t\t\t\t\t\tcolor: 'secondary.main',\n\t\t\t\t\t\tmarginLeft: 4\n\t\t\t\t\t}}\n\t\t\t\t\tvariant=\"h1\"\n\t\t\t\t>\n\t\t\t\t\tHome Page Settings\n\t\t\t\t</Typography>\n\t\t\t</Grid>\n\t\t\t<Grid item>\n\t\t\t\t<Card sx={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-start', justifyContent: 'flex-start', p: 4 }}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\tcolor: 'gray',\n\t\t\t\t\t\t\t\tmb: 2\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tvariant=\"h4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tChange Home Page Carousel Images\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\t\tsetImages(event.target.files);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\thelperText=\"Upload Images\"\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\tinputProps={{ accept: 'image/*', multiple: true }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Box sx={{ mt: 2, position: 'relative' }}>\n\t\t\t\t\t\t\t<Button disabled={lock} sx={{ color: 'white' }} onClick={handleUpload} variant=\"contained\">\n\t\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t{lock && (\n\t\t\t\t\t\t\t\t<CircularProgress\n\t\t\t\t\t\t\t\t\tsize={24}\n\t\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t\t\t\ttop: '50%',\n\t\t\t\t\t\t\t\t\t\tleft: '20px',\n\t\t\t\t\t\t\t\t\t\tmarginTop: '-12px'\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</div>\n\t\t\t\t</Card>\n\t\t\t</Grid>\n\t\t</Grid>\n\t);\n}\n"],"sourceRoot":""}